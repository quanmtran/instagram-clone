(this["webpackJsonpinstagram-clone-react"]=this["webpackJsonpinstagram-clone-react"]||[]).push([[0],{59:function(e,t,c){},60:function(e,t,c){"use strict";c.r(t);var n=c(7),s=c.n(n),r=c(44),a=c.n(r),i=c(0),o=c.n(i),j=c(1),l=c(12),u=c(14),b=c(15),d=c(31),O=c(45),p=c(28),m=c(9),f=c(21),x=Object(O.a)({apiKey:"AIzaSyDYiN5Dj9UlJgd0nIHEcdOjHMahiP9oKlo",authDomain:"instagram-clone-dcbd6.firebaseapp.com",projectId:"instagram-clone-dcbd6",storageBucket:"instagram-clone-dcbd6.appspot.com",messagingSenderId:"797632144636",appId:"1:797632144636:web:038f11f906fb813a012379"}),h=Object(p.b)(x),v=Object(m.i)(x),g=Object(m.d)(v,"users"),U=Object(m.d)(v,"posts"),N=Object(f.c)(x),k="https://firebasestorage.googleapis.com/v0/b/instagram-clone-dcbd6.appspot.com/o/images%2Fdefault-profile-img.jpg?alt=media&token=db689368-579f-44b2-ab10-07ff8a2bd700",w=c(3);function I(e){var t=e.postObject;return Object(w.jsx)(u.b,{to:"/post/".concat(t.id),children:Object(w.jsxs)("div",{className:"user-page-img-container",children:[Object(w.jsx)("img",{src:t.imgUrl}),Object(w.jsxs)("div",{className:"img-stats",children:[Object(w.jsxs)("div",{children:[Object(w.jsx)("i",{className:"material-icons",children:"favorite"}),Object(w.jsx)("div",{children:t.likedBy.length})]}),Object(w.jsxs)("div",{children:[Object(w.jsx)("i",{className:"material-icons",children:"chat_bubble"}),Object(w.jsx)("div",{children:t.comments.length})]})]})]})})}function y(e){var t=e.currentUserObject;return Object(w.jsxs)("div",{className:"profile-options",children:[Object(w.jsx)(u.b,{to:"/user/".concat(t.username),children:Object(w.jsxs)("div",{children:[Object(w.jsx)("span",{className:"material-icons",children:"account_circle"}),"Profile"]})}),Object(w.jsx)(u.b,{to:"/account/edit",children:Object(w.jsxs)("div",{children:[Object(w.jsx)("span",{className:"material-icons",children:"settings"}),"Settings"]})}),Object(w.jsx)("div",{className:"log-out-btn",onClick:function(){Object(p.e)(h)},children:"Log Out"})]})}function L(e){var t=e.currentUserObject,c=Object(n.useState)(!1),s=Object(l.a)(c,2),r=s[0],a=s[1];return Object(w.jsx)("header",{children:Object(w.jsxs)("div",{className:"header-container",children:[Object(w.jsx)(u.b,{to:"/",children:Object(w.jsx)("div",{className:"insta-logo",children:"Isn'tagram"})}),Object(w.jsxs)("div",{className:"nav-container-header",children:[Object(w.jsx)(u.b,{to:"/",children:Object(w.jsx)("i",{className:"material-icons",children:"home"})}),Object(w.jsx)("i",{className:"material-icons",children:"chat"}),Object(w.jsx)("i",{className:"material-icons",children:"explore"}),Object(w.jsx)("i",{className:"material-icons",children:"favorite"}),Object(w.jsx)("div",{className:"profile-img",onClick:function(){a((function(e){return!e}))},style:{backgroundImage:"url(".concat(t.profileImgUrl,")")},children:r&&Object(w.jsx)(y,{currentUserObject:t})})]})]})})}function D(e){var t=e.userObject,c=e.postObjects,s=e.currentUserObject,r=e.setUserList,a=e.toggleUserListDisplayed,i=Object(n.useState)(t.followers.includes(s.userId)),b=Object(l.a)(i,2),d=b[0],O=b[1],p=Object(n.useState)(t.followers.length),f=Object(l.a)(p,2),x=f[0],h=f[1],v=Boolean(s.userId===t.userId),U=function(){var e=Object(j.a)(o.a.mark((function e(){var c,n;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(c=Object(m.f)(g,t.userId),n=Object(m.f)(g,s.userId),e.prev=2,!d){e.next=11;break}return e.next=6,Object(m.n)(c,{followers:Object(m.b)(s.userId)});case 6:return e.next=8,Object(m.n)(n,{followings:Object(m.b)(t.userId)});case 8:h((function(e){return e-1})),e.next=16;break;case 11:return e.next=13,Object(m.n)(c,{followers:Object(m.c)(s.userId)});case 13:return e.next=15,Object(m.n)(n,{followings:Object(m.c)(t.userId)});case 15:h((function(e){return e+1}));case 16:O((function(e){return!e})),e.next=22;break;case 19:e.prev=19,e.t0=e.catch(2),console.log(e.t0);case 22:case"end":return e.stop()}}),e,null,[[2,19]])})));return function(){return e.apply(this,arguments)}}();return Object(w.jsxs)("div",{className:"user-info",children:[Object(w.jsx)("div",{className:"profile-img-container",children:Object(w.jsx)("div",{className:"profile-img",style:{backgroundImage:"url(".concat(t.profileImgUrl,")")}})}),Object(w.jsxs)("div",{className:"username-and-btns",children:[Object(w.jsx)("div",{className:"username",children:t.username}),v?Object(w.jsx)(u.b,{to:"/account/edit",children:Object(w.jsx)("div",{className:"account-interactive-btn edit-profile-btn",children:"Edit Profile"})}):Object(w.jsxs)("div",{onClick:U,className:"account-interactive-btn follow-btn ".concat(d&&"following"),children:["Follow",d&&"ing"]})]}),Object(w.jsxs)("div",{className:"bio",children:[Object(w.jsx)("div",{className:"bio-name",children:t.name}),Object(w.jsx)("div",{className:"bio-text",children:t.bio})]}),Object(w.jsxs)("div",{className:"stats",children:[Object(w.jsxs)("div",{children:[Object(w.jsx)("span",{children:c.length}),"post",c.length>1&&"s"]}),Object(w.jsxs)("div",{onClick:function(){r({listName:"Followers",users:t.followers}),a()},children:[Object(w.jsx)("span",{children:x}),"follower",t.followers.length>1&&"s"]}),Object(w.jsxs)("div",{onClick:function(){r({listName:"Following",users:t.followings}),a()},children:[Object(w.jsx)("span",{children:t.followings.length}),"following"]})]})]})}function S(){return Object(w.jsxs)("div",{className:"nav-container-content",children:[Object(w.jsxs)("div",{children:[Object(w.jsx)("i",{className:"material-icons",children:"grid_on"}),Object(w.jsx)("div",{children:"posts"})]}),Object(w.jsxs)("div",{children:[Object(w.jsx)("i",{className:"material-icons",children:"movie"}),Object(w.jsx)("div",{children:"reels"})]}),Object(w.jsxs)("div",{children:[Object(w.jsx)("i",{className:"material-icons",children:"live_tv"}),Object(w.jsx)("div",{children:"igtv"})]}),Object(w.jsxs)("div",{children:[Object(w.jsx)("i",{className:"material-icons",children:"assignment_ind"}),Object(w.jsx)("div",{children:"tagged"})]})]})}function C(e){var t=e.userId,c=e.toggleUserListDisplayed,s=e.currentUserObject,r=Object(n.useState)({}),a=Object(l.a)(r,2),i=a[0],b=a[1],d=Object(n.useState)(!1),O=Object(l.a)(d,2),p=O[0],f=O[1],x=Object(n.useState)(null),h=Object(l.a)(x,2),v=h[0],U=h[1],N=Object(n.useState)(null),k=Object(l.a)(N,2),I=k[0],y=k[1];Object(n.useEffect)(Object(j.a)(o.a.mark((function e(){var c,n;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(m.g)(Object(m.f)(g,t));case 2:c=e.sent,n=c.data(),b(n),U(n.userId===s.userId),y(n.followers.includes(s.userId)),f(!0);case 8:case"end":return e.stop()}}),e)}))),[]);var L=function(){var e=Object(j.a)(o.a.mark((function e(){var t,c;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=Object(m.f)(g,i.userId),c=Object(m.f)(g,s.userId),e.prev=2,!I){e.next=10;break}return e.next=6,Object(m.n)(t,{followers:Object(m.b)(s.userId)});case 6:return e.next=8,Object(m.n)(c,{followings:Object(m.b)(i.userId)});case 8:e.next=14;break;case 10:return e.next=12,Object(m.n)(t,{followers:Object(m.c)(s.userId)});case 12:return e.next=14,Object(m.n)(c,{followings:Object(m.c)(i.userId)});case 14:y((function(e){return!e})),e.next=20;break;case 17:e.prev=17,e.t0=e.catch(2),console.log(e.t0);case 20:case"end":return e.stop()}}),e,null,[[2,17]])})));return function(){return e.apply(this,arguments)}}();return p?Object(w.jsxs)("div",{className:"user-card",children:[Object(w.jsxs)("div",{className:"user-card-profile-img-and-name",children:[Object(w.jsx)(u.b,{to:"/user/".concat(i.username),onClick:c,children:Object(w.jsx)("div",{className:"profile-img",style:{backgroundImage:"url(".concat(i.profileImgUrl,")")}})}),Object(w.jsxs)("div",{children:[Object(w.jsx)(u.b,{to:"/user/".concat(i.username),onClick:c,children:Object(w.jsx)("span",{className:"username",children:i.username})}),Object(w.jsx)("span",{className:"name",children:i.name})]})]}),!v&&Object(w.jsxs)("div",{className:"follow-btn ".concat(I?"following":""),onClick:L,children:["Follow",I?"ing":""]})]}):null}function F(e){var t=e.toggleUserListDisplayed,c=e.userList,n=e.currentUserObject;return Object(w.jsx)("div",{className:"user-list-page",children:Object(w.jsxs)("div",{className:"user-list-container",children:[Object(w.jsxs)("div",{children:[c.listName,Object(w.jsx)("span",{className:"material-icons",onClick:t,children:"close"})]}),Object(w.jsx)("div",{children:c.users.map((function(e){return Object(w.jsx)(C,{userId:e,toggleUserListDisplayed:t,currentUserObject:n},e)}))})]})})}function E(e){var t=e.isLoggedIn,c=e.currentUserObject,s=e.userList,r=e.setUserList,a=e.isUserListDisplayed,i=e.toggleUserListDisplayed,u=Object(n.useState)([]),O=Object(l.a)(u,2),p=O[0],f=O[1],x=Object(n.useState)({}),h=Object(l.a)(x,2),v=h[0],N=h[1],k=Object(n.useState)(!0),y=Object(l.a)(k,2),C=y[0],E=y[1],P=Object(b.h)().username;Object(n.useEffect)(Object(j.a)(o.a.mark((function e(){var t,c,n,s,r;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return E(!0),e.next=3,A(P);case 3:return t=e.sent,c=Object(m.l)(U,Object(m.o)("ownerUserId","==",t),Object(m.k)("postedAt","desc")),e.next=7,Object(m.h)(c);case 7:return n=e.sent,s=n.docs.map((function(e){return Object(d.a)({id:e.id},e.data())})),f(s),e.next=12,Object(m.g)(Object(m.f)(g,"".concat(t)));case 12:r=e.sent,N(r.data()),E(!1);case 15:case"end":return e.stop()}}),e)}))),[P]);var A=function(){var e=Object(j.a)(o.a.mark((function e(t){var c,n;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,c=Object(m.l)(g,Object(m.o)("username","==",t)),e.next=4,Object(m.h)(c);case 4:return n=e.sent,e.abrupt("return",n.docs[0].data().userId);case 8:return e.prev=8,e.t0=e.catch(0),console.log(e.t0),e.abrupt("return","");case 12:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(t){return e.apply(this,arguments)}}();return t?Object(w.jsx)(w.Fragment,{children:C?"Loading...":Object(w.jsxs)(w.Fragment,{children:[Object(w.jsx)(L,{currentUserObject:c}),Object(w.jsxs)("div",{className:"user-page-container",children:[Object(w.jsx)(D,{userObject:v,postObjects:p,currentUserObject:c,setUserList:r,toggleUserListDisplayed:i}),Object(w.jsxs)("div",{className:"content",children:[Object(w.jsx)(S,{}),Object(w.jsx)("div",{className:"content-container",children:p.map((function(e){return Object(w.jsx)(I,{postObject:e,currentUserObject:c},e.id)}))})]})]}),a&&Object(w.jsx)(F,{toggleUserListDisplayed:i,userList:s,currentUserObject:c})]})}):Object(w.jsx)(b.a,{to:"/"})}function P(e){var t=e.isLoggedIn,c=Object(n.useState)(!0),s=Object(l.a)(c,2),r=s[0],a=s[1],i=Object(n.useState)(""),u=Object(l.a)(i,2),d=u[0],O=u[1],f=Object(n.useState)(""),x=Object(l.a)(f,2),v=x[0],U=x[1],N=Object(n.useState)(""),I=Object(l.a)(N,2),y=I[0],L=I[1],D=Object(n.useState)(""),S=Object(l.a)(D,2),C=S[0],F=S[1],E=Object(n.useState)(""),P=Object(l.a)(E,2),A=P[0],B=P[1],R=function(e){var t=e.target,c=t.name,n=t.value;switch(B(""),c){case"email":O(n);break;case"password":U(n);break;case"fullname":F(n);break;case"username":L(n)}},M=function(){var e=Object(j.a)(o.a.mark((function e(t){var c,n,s;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.preventDefault(),e.prev=1,!r){e.next=7;break}return e.next=5,Object(p.d)(h,d,v);case 5:e.next=14;break;case 7:return e.next=9,Object(p.a)(h,d,v);case 9:return c=e.sent,n=c.user.uid,s={userId:n,username:y,profileImgUrl:k,name:C,bio:"",followers:[],followings:[]},e.next=14,Object(m.m)(Object(m.f)(g,n),s);case 14:e.next=19;break;case 16:e.prev=16,e.t0=e.catch(1),B(e.t0.message);case 19:case"end":return e.stop()}}),e,null,[[1,16]])})));return function(t){return e.apply(this,arguments)}}();return t?Object(w.jsx)(b.a,{to:"/home"}):Object(w.jsxs)("div",{className:"auth-page",children:[Object(w.jsxs)("form",{onSubmit:M,children:[Object(w.jsx)("div",{className:"insta-logo",children:"Isn'tagram"}),Object(w.jsx)("div",{children:Object(w.jsx)("input",{name:"email",type:"text",value:d,placeholder:"Email",onChange:R,required:!0})}),Object(w.jsx)("div",{children:Object(w.jsx)("input",{name:"password",type:"password",value:v,placeholder:"Password",onChange:R,required:!0})}),!r&&Object(w.jsxs)(w.Fragment,{children:[Object(w.jsx)("div",{children:Object(w.jsx)("input",{name:"fullname",type:"text",value:C,placeholder:"Full Name",onChange:R,required:!0})}),Object(w.jsx)("div",{children:Object(w.jsx)("input",{name:"username",type:"text",value:y,placeholder:"Username",onChange:R,required:!0})})]}),Object(w.jsxs)("div",{children:[Object(w.jsx)("input",{type:"submit",value:r?"Log in":"Sign up"}),A]})]}),Object(w.jsxs)("div",{children:[r?"Don't have an account?":"Have an account?",Object(w.jsx)("span",{onClick:function(){a((function(e){return!e})),O(""),U(""),L(""),F(""),B("")},children:r?" Sign up":" Log in"})]})]})}var A=c(18),B=function(){var e=Object(j.a)(o.a.mark((function e(t){var c;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(m.g)(Object(m.f)(g,t));case 2:return c=e.sent,e.abrupt("return",c.data().username);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),R=function(e){var t,c,n=6e4,s=36e5,r=864e5,a=Date.now()-e;return a/r>=1?(t="".concat(Math.floor(a/r)),c="DAY"):a/s>=1?(t="".concat(Math.floor(a/s)),c="HOUR"):a/n>=1?(t="".concat(Math.floor(a/n)),c="MINUTE"):(t="".concat(Math.floor(a/1e3)),c="SECOND"),"".concat(t," ").concat(c).concat(t>1?"S":""," AGO")};function M(e){var t=e.postDocRef,c=e.postObject,s=e.comment,r=e.currentUserObject,a=Object(n.useState)(""),i=Object(l.a)(a,2),b=i[0],d=i[1],O=Object(n.useState)(!0),p=Object(l.a)(O,2),f=p[0],x=p[1];Object(n.useEffect)(Object(j.a)(o.a.mark((function e(){var t;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,B(s.ownerUserId);case 2:t=e.sent,d(t),x(!1);case 5:case"end":return e.stop()}}),e)}))),[]);var h=function(){var e=Object(j.a)(o.a.mark((function e(){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(m.n)(t,{comments:Object(m.b)(s)});case 2:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return f?Object(w.jsx)("div",{}):Object(w.jsxs)("div",{className:"comment",children:[Object(w.jsxs)("div",{className:"username-and-text",children:[Object(w.jsx)("span",{className:"username",children:Object(w.jsx)(u.b,{to:"/user/".concat(b),children:b})})," ",Object(w.jsx)("span",{children:s.text})]}),(r.userId===s.ownerUserId||r.userId===c.ownerUserId)&&Object(w.jsx)("span",{className:"material-icons delete-comment-btn",onClick:h,children:"clear"})]})}function _(e){var t=e.postId,c=e.currentUserId,s=e.postDocRef,r=Object(n.useState)(""),a=Object(l.a)(r,2),i=a[0],u=a[1],b=function(){var e=Object(j.a)(o.a.mark((function e(n){var r;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n.preventDefault(),""!==i.trim()){e.next=3;break}return e.abrupt("return");case 3:return r={id:"".concat(t,"-").concat(c,"-").concat(Date.now()),ownerUserId:c,postedAt:Date.now(),text:i},e.next=6,Object(m.n)(s,{comments:Object(m.c)(r)});case 6:u("");case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(w.jsxs)("form",{className:"comment-input-container",onSubmit:b,children:[Object(w.jsx)("input",{placeholder:"Add a comment...",value:i,onChange:function(e){u(e.target.value)}}),Object(w.jsx)("input",{type:"submit",value:"Post",className:i.trim()?"active":""})]})}function T(e){var t=e.postOwnerObject;return Object(w.jsxs)("div",{className:"post-header",children:[Object(w.jsx)(u.b,{to:"/user/".concat(t.username),children:Object(w.jsx)("div",{className:"profile-img",style:{backgroundImage:"url(".concat(t.profileImgUrl,")")}})}),Object(w.jsx)(u.b,{to:"/user/".concat(t.username),children:Object(w.jsx)("div",{className:"username",children:t.username})})]})}function q(e){var t=e.handleEditToggle,c=e.handleDelete,n=e.handleMoreClick,s=e.isMoreOptionsDisplayed;return Object(w.jsxs)("div",{children:[Object(w.jsx)("span",{className:"material-icons post-more-btn",onClick:n,children:"more_horiz"}),s&&Object(w.jsxs)("div",{className:"post-more-options",children:[Object(w.jsx)("button",{onClick:t,children:"Edit"}),Object(w.jsx)("button",{onClick:c,children:"Delete"})]})]})}function H(e){var t=e.postObject,c=e.currentUserObject,s=e.toggleUserListDisplayed,r=e.setUserList,a=Object(n.useState)(!1),i=Object(l.a)(a,2),d=i[0],O=i[1],p=Object(n.useState)(t.caption),x=Object(l.a)(p,2),h=x[0],v=x[1],k=Object(n.useState)({}),I=Object(l.a)(k,2),y=I[0],L=I[1],D=Object(n.useState)(!1),S=Object(l.a)(D,2),C=S[0],F=S[1],E=Object(n.useState)(!1),P=Object(l.a)(E,2),A=P[0],B=P[1],H=Object(b.g)(),J=Object(m.f)(U,t.id),z=Object(f.d)(N,"".concat(t.ownerUserId)),K=t.likedBy,Y=K.length,G=c.userId,W=K.includes(G),Q=t.imgId;Object(n.useEffect)((function(){V()}),[]);var V=function(){var e=Object(j.a)(o.a.mark((function e(){var c,n;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return c=Object(m.f)(g,t.ownerUserId),e.next=3,Object(m.g)(c);case 3:n=e.sent,L(n.data());case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),X=function(){var e=Object(j.a)(o.a.mark((function e(t){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),e.next=3,Object(m.n)(J,{caption:h});case 3:O(!1);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),Z=function(){O((function(e){return!e})),F(!1),v(t.caption)},$=function(){var e=Object(j.a)(o.a.mark((function e(){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,H.push("/"),e.next=4,Object(m.e)(Object(m.f)(U,"".concat(t.id)));case 4:if(!Q){e.next=7;break}return e.next=7,Object(f.a)(Object(f.d)(z,Q));case 7:e.next=12;break;case 9:e.prev=9,e.t0=e.catch(0),console.log(e.t0);case 12:case"end":return e.stop()}}),e,null,[[0,9]])})));return function(){return e.apply(this,arguments)}}(),ee=function(){var e=Object(j.a)(o.a.mark((function e(){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,!W){e.next=6;break}return e.next=4,Object(m.n)(J,{likedBy:Object(m.b)(G)});case 4:e.next=8;break;case 6:return e.next=8,Object(m.n)(J,{likedBy:Object(m.c)(G)});case 8:e.next=13;break;case 10:e.prev=10,e.t0=e.catch(0),console.log(e.t0);case 13:case"end":return e.stop()}}),e,null,[[0,10]])})));return function(){return e.apply(this,arguments)}}(),te=function(){var e=Object(j.a)(o.a.mark((function e(){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return B(!0),setTimeout((function(){return B(!1)}),1e3),e.prev=2,e.next=5,Object(m.n)(J,{likedBy:Object(m.c)(G)});case 5:e.next=10;break;case 7:e.prev=7,e.t0=e.catch(2),console.log(e.t0);case 10:case"end":return e.stop()}}),e,null,[[2,7]])})));return function(){return e.apply(this,arguments)}}();return Object(w.jsxs)("div",{className:"post-container",children:[Object(w.jsx)(T,{postOwnerObject:y}),Object(w.jsxs)("div",{className:"post-img",onDoubleClick:te,children:[Object(w.jsx)("img",{src:t.imgUrl}),A&&Object(w.jsx)("span",{className:"material-icons",children:"favorite"})]}),d?Object(w.jsxs)("form",{onSubmit:X,className:"post-edit-form",children:[Object(w.jsx)("input",{type:"text",value:h,placeholder:"Edit caption...",onChange:function(e){v(e.target.value)}}),Object(w.jsx)("input",{type:"button",value:"Cancel",onClick:Z}),Object(w.jsx)("input",{type:"submit",value:"Save"})]}):Object(w.jsxs)(w.Fragment,{children:[Object(w.jsxs)("div",{className:"post-interactive-btns",children:[Object(w.jsx)("span",{className:"material-icons like-btn ".concat(W?"liked":""),onClick:ee,children:"favorite".concat(W?"":"_border")}),c.userId===t.ownerUserId&&Object(w.jsx)(q,{handleEditToggle:Z,handleDelete:$,handleMoreClick:function(){F((function(e){return!e}))},isMoreOptionsDisplayed:C})]}),Object(w.jsx)("div",{className:"post-like-count",children:Y?Object(w.jsxs)(w.Fragment,{children:["Liked by\xa0",Object(w.jsxs)("span",{onClick:function(){r({listName:"Likes",users:t.likedBy}),s()},children:[Y," ",1===Y?"person":"people"]}),"."]}):"Be the first person to like this post."}),Object(w.jsxs)("div",{className:"post-caption-and-comments",children:[t.caption&&Object(w.jsxs)("div",{className:"post-caption",children:[Object(w.jsx)("span",{className:"username",children:Object(w.jsx)(u.b,{to:"/user/".concat(y.username),children:y.username})})," ",t.caption]}),t.comments.map((function(e){return Object(w.jsx)(M,{postDocRef:J,postObject:t,comment:e,currentUserObject:c},e.id)}))]}),Object(w.jsx)("div",{className:"posted-at",children:R(t.postedAt)}),Object(w.jsx)(_,{postId:t.id,currentUserId:G,postDocRef:J})]})]})}var J=c(62);function z(e){var t=e.currentUserObject,c=Object(n.useState)(""),s=Object(l.a)(c,2),r=s[0],a=s[1],i=Object(n.useState)(""),u=Object(l.a)(i,2),b=u[0],d=u[1],O=Object(n.useRef)(null),p=function(){var e=Object(j.a)(o.a.mark((function e(c){var n,s,i,j,l;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(c.preventDefault(),e.prev=1,!b){e.next=17;break}return n=Object(J.a)(),s=Object(f.d)(N,"".concat(t.userId)),i=Object(f.d)(s,n),e.next=8,Object(f.e)(i,b,"data_url");case 8:return e.next=10,Object(f.b)(i);case 10:return j=e.sent,l={caption:r,postedAt:Date.now(),ownerUserId:t.userId,imgId:n,imgUrl:j,likedBy:[],comments:[]},e.next=14,Object(m.a)(U,l);case 14:a(""),d(""),document.body.scrollTop=document.documentElement.scrollTop=0;case 17:e.next=22;break;case 19:e.prev=19,e.t0=e.catch(1),console.log(e.t0);case 22:case"end":return e.stop()}}),e,null,[[1,19]])})));return function(t){return e.apply(this,arguments)}}();return Object(w.jsxs)("form",{onSubmit:p,className:"post-upload-form",children:[Object(w.jsx)("div",{className:"drag-and-drop-container",children:b?Object(w.jsx)("div",{className:"image-preview",style:{backgroundImage:"url(".concat(b,")")},children:Object(w.jsx)("span",{className:"material-icons",onClick:function(){d("")},children:"cancel"})}):Object(w.jsxs)("div",{ref:O,className:"drag-and-drop-area",children:[Object(w.jsx)("span",{children:"Add a photo"}),Object(w.jsx)("span",{children:"or drag and drop"}),Object(w.jsx)("input",{type:"file",accept:"image/*",onChange:function(e){d(null);var t=e.target.files[0];if(t&&"image"===t.type.split("/")[0]){var c=new FileReader;c.onload=function(){d(c.result)},c.readAsDataURL(t)}},onDragEnter:function(){O.current.classList.add("dragover")},onDragLeave:function(){O.current.classList.remove("dragover")},onDrop:function(){O.current.classList.remove("dragover")}})]})}),b&&Object(w.jsx)("textarea",{placeholder:"Write a caption...",value:r,onChange:function(e){a(e.target.value)}}),Object(w.jsx)("input",{type:"submit",value:"Post",className:b?"active":""})]})}function K(e){var t=e.currentUserObject;return Object(w.jsxs)("div",{className:"current-user-card",children:[Object(w.jsx)(T,{postOwnerObject:t}),Object(w.jsx)(z,{currentUserObject:t})]})}function Y(e){var t=e.isLoggedIn,c=e.currentUserObject,s=e.userList,r=e.setUserList,a=e.isUserListDisplayed,i=e.toggleUserListDisplayed,o=Object(n.useState)([]),j=Object(l.a)(o,2),u=j[0],O=j[1],p=Object(n.useState)(!1),f=Object(l.a)(p,2),x=f[0],h=f[1],v=[c.userId].concat(Object(A.a)(c.followings));return Object(n.useEffect)((function(){var e;e=v.length>10?Object(m.l)(U,Object(m.k)("postedAt","desc")):Object(m.l)(U,Object(m.o)("ownerUserId","in",v),Object(m.k)("postedAt","desc"));var t=Object(m.j)(e,(function(e){var t=e.docs.map((function(e){return Object(d.a)({id:e.id},e.data())}));O(t),h(!0)}));return function(){t()}}),[]),t?Object(w.jsx)(w.Fragment,{children:x?Object(w.jsxs)(w.Fragment,{children:[Object(w.jsx)(L,{currentUserObject:c}),Object(w.jsxs)("div",{className:"homepage-container",children:[Object(w.jsx)(K,{currentUserObject:c}),Object(w.jsx)("div",{className:"homepage-content",children:u.map((function(e){return Object(w.jsx)(H,{postObject:e,currentUserObject:c,toggleUserListDisplayed:i,setUserList:r},e.id)}))})]}),a&&Object(w.jsx)(F,{toggleUserListDisplayed:i,userList:s,currentUserObject:c})]}):"Loading..."}):Object(w.jsx)(b.a,{to:"/"})}function G(e){var t=e.handleChangeProfileImgToggle,c=e.currentUserDocRef,n=e.refreshCurrentUserObject,s=e.currentUserObject,r=Object(f.d)(N,"".concat(s.userId)),a=Object(f.d)(r,"profile_img"),i=function(){var e=Object(j.a)(o.a.mark((function e(r){var i,l;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t(),(i=r.target.files[0])&&((l=new FileReader).onload=Object(j.a)(o.a.mark((function e(){var t,r;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=l.result,e.next=3,Object(f.e)(a,t,"data_url");case 3:return e.next=5,Object(f.b)(a);case 5:return r=e.sent,e.next=8,Object(m.n)(c,{profileImgUrl:r});case 8:return e.next=10,n(s.userId);case 10:case"end":return e.stop()}}),e)}))),l.readAsDataURL(i));case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),l=function(){var e=Object(j.a)(o.a.mark((function e(){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t(),e.next=3,Object(m.n)(c,{profileImgUrl:k});case 3:return e.next=5,n(s.userId);case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(w.jsx)("div",{className:"profile-img-options-page",children:Object(w.jsxs)("div",{className:"profile-img-options-container",children:[Object(w.jsx)("div",{children:"Change Profile Photo"}),Object(w.jsx)("div",{className:"upload-img-btn",children:Object(w.jsxs)("label",{className:"color-blue text-bold clickable",children:["Upload Photo",Object(w.jsx)("input",{type:"file",accept:"image/*",onChange:i})]})}),Object(w.jsx)("div",{className:"color-red text-bold clickable",onClick:l,children:"Remove Current Photo"}),Object(w.jsx)("div",{className:"clickable",onClick:t,children:"Cancel"})]})})}function W(e){var t=e.isLoggedIn,c=e.currentUserObject,s=e.refreshCurrentUserObject,r=Object(m.f)(g,c.userId),a=Object(n.useState)(c.name),i=Object(l.a)(a,2),u=i[0],d=i[1],O=Object(n.useState)(c.bio),p=Object(l.a)(O,2),f=p[0],x=p[1],h=Object(n.useState)(!1),v=Object(l.a)(h,2),U=v[0],N=v[1],k=Object(n.useState)(!1),I=Object(l.a)(k,2),y=I[0],D=I[1],S=Object(n.useState)(!1),C=Object(l.a)(S,2),F=C[0],E=C[1],P=function(){document.body.classList.toggle("scroll-locked"),E((function(e){return!e}))},A=function(e){var t=e.target,c=t.name,n=t.value;switch(N(!0),D(!1),c){case"name":d(n);break;case"bio":x(n)}},B=function(){var e=Object(j.a)(o.a.mark((function e(t){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.preventDefault(),!U){e.next=8;break}return e.next=4,Object(m.n)(r,{name:u.trim(),bio:f.trim()});case 4:return e.next=6,s(c.userId);case 6:N(!1),D(!0);case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return t?Object(w.jsxs)(w.Fragment,{children:[Object(w.jsx)(L,{currentUserObject:c}),Object(w.jsx)("div",{className:"account-edit-container",children:Object(w.jsxs)("form",{onSubmit:B,className:"account-edit-form",children:[Object(w.jsxs)("div",{className:"form-header",children:[Object(w.jsx)("div",{children:Object(w.jsx)("div",{className:"profile-img",style:{backgroundImage:"url(".concat(c.profileImgUrl,")")}})}),Object(w.jsxs)("div",{children:[Object(w.jsx)("span",{className:"username",children:c.username}),Object(w.jsx)("span",{className:"change-profile-img-btn",onClick:P,children:"Change Profile Photo"})]})]}),Object(w.jsxs)("div",{className:"form-control",children:[Object(w.jsx)("label",{htmlFor:"name",children:"Name"}),Object(w.jsx)("input",{type:"text",name:"name",placeholder:"Name",className:"form-input",value:u,onChange:A})]}),Object(w.jsxs)("div",{className:"form-control",children:[Object(w.jsx)("label",{htmlFor:"bio",children:"Bio"}),Object(w.jsx)("textarea",{name:"bio",placeholder:"Bio",className:"form-input",value:f,onChange:A})]}),Object(w.jsxs)("div",{className:"submit-btn-container",children:[Object(w.jsx)("input",{type:"submit",className:"submit-btn ".concat(U?"active":""),value:"Submit"}),y&&Object(w.jsx)("div",{children:"Profile saved!"})]})]})}),F&&Object(w.jsx)(G,{handleChangeProfileImgToggle:P,currentUserDocRef:r,refreshCurrentUserObject:s,currentUserObject:c})]}):Object(w.jsx)(b.a,{to:"/"})}function Q(e){var t=e.isLoggedIn,c=e.currentUserObject,s=e.userList,r=e.setUserList,a=e.isUserListDisplayed,i=e.toggleUserListDisplayed,o=Object(n.useState)(!1),j=Object(l.a)(o,2),u=j[0],O=j[1],p=Object(n.useState)({}),f=Object(l.a)(p,2),x=f[0],h=f[1],v=Object(b.h)().postId;return Object(n.useEffect)((function(){var e=Object(m.j)(Object(m.f)(U,v),(function(e){var t=Object(d.a)({id:e.id},e.data());h(t),O(!0)}));return function(){e()}}),[]),t?u?Object(w.jsxs)(w.Fragment,{children:[Object(w.jsx)(L,{currentUserObject:c}),Object(w.jsx)("div",{className:"post-page-container",children:Object(w.jsx)(H,{postObject:x,currentUserObject:c,toggleUserListDisplayed:i,setUserList:r})}),a&&Object(w.jsx)(F,{toggleUserListDisplayed:i,userList:s})]}):"Loading...":Object(w.jsx)(b.a,{to:"/"})}function V(e){var t=e.isLoggedIn,c=e.currentUserObject,n=e.refreshCurrentUserObject,s=e.userList,r=e.setUserList,a=e.isUserListDisplayed,i=e.toggleUserListDisplayed;return Object(w.jsx)(u.a,{children:Object(w.jsxs)(b.d,{children:[Object(w.jsx)(b.b,{exact:!0,path:"/",children:Object(w.jsx)(P,{isLoggedIn:t})}),Object(w.jsx)(b.b,{exact:!0,path:"/home",children:Object(w.jsx)(Y,{isLoggedIn:t,currentUserObject:c,userList:s,setUserList:r,isUserListDisplayed:a,toggleUserListDisplayed:i})}),Object(w.jsx)(b.b,{path:"/user/:username",children:Object(w.jsx)(E,{isLoggedIn:t,currentUserObject:c,userList:s,setUserList:r,isUserListDisplayed:a,toggleUserListDisplayed:i})}),Object(w.jsx)(b.b,{path:"/account/edit",children:Object(w.jsx)(W,{isLoggedIn:t,currentUserObject:c,refreshCurrentUserObject:n})}),Object(w.jsx)(b.b,{path:"/post/:postId",children:Object(w.jsx)(Q,{isLoggedIn:t,currentUserObject:c,userList:s,setUserList:r,isUserListDisplayed:a,toggleUserListDisplayed:i})})]})})}c(59);var X=function(){var e=Object(n.useState)(!1),t=Object(l.a)(e,2),c=t[0],s=t[1],r=Object(n.useState)(!1),a=Object(l.a)(r,2),i=a[0],u=a[1],b=Object(n.useState)(null),d=Object(l.a)(b,2),O=d[0],f=d[1],x=Object(n.useState)({listName:"",users:[]}),v=Object(l.a)(x,2),U=v[0],N=v[1],k=Object(n.useState)(!1),I=Object(l.a)(k,2),y=I[0],L=I[1],D=function(){var e=Object(j.a)(o.a.mark((function e(t){var c,n;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(m.g)(Object(m.f)(g,t));case 2:c=e.sent,n=c.data(),f(n);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(n.useEffect)((function(){Object(p.c)(h,function(){var e=Object(j.a)(o.a.mark((function e(t){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t){e.next=6;break}return e.next=3,D(t.uid);case 3:u(!0),e.next=7;break;case 6:u(!1);case 7:s(!0);case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())}),[]),c?Object(w.jsx)(w.Fragment,{children:Object(w.jsx)(V,{isLoggedIn:i,currentUserObject:O,refreshCurrentUserObject:D,userList:U,setUserList:N,isUserListDisplayed:y,toggleUserListDisplayed:function(){L((function(e){return!e})),document.body.classList.toggle("scroll-locked")}})}):"Loading..."};a.a.render(Object(w.jsx)(s.a.StrictMode,{children:Object(w.jsx)(X,{})}),document.getElementById("root"))}},[[60,1,2]]]);
//# sourceMappingURL=main.e0eee8a8.chunk.js.map